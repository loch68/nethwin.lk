<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Wishlist - NethwinLK</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Work+Sans%3Awght%40400%3B500%3B700%3B900"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        // Suppress Tailwind CDN warning
        window.addEventListener('load', function() {
            const originalWarn = console.warn;
            console.warn = function(message) {
                if (typeof message === 'string' && message.includes('cdn.tailwindcss.com should not be used in production')) {
                    return;
                }
                originalWarn.apply(console, arguments);
            };
        });
    </script>
    <link rel="stylesheet" href="../css/hover-effects.css" />
    <link rel="stylesheet" href="../css/navbar.css" />
    <link rel="stylesheet" href="../css/background-animations.css" />
    <link rel="stylesheet" href="../css/cart-styles.css" />
    <style>
        .wishlist-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .wishlist-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .wishlist-heart {
            transition: all 0.2s ease;
        }
        
        .wishlist-heart:hover {
            transform: scale(1.1);
        }
        
        .wishlist-updated {
            animation: pulse 0.6s ease-in-out;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .empty-wishlist {
            animation: fadeInUp 0.6s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
    <link rel="stylesheet" href="../css/responsive.css" />
</head>
<body>
    <div class="relative flex min-h-screen flex-col bg-white overflow-x-hidden font-[Inter, 'Noto Sans', sans-serif] modern-gradient">
        <!-- Background Animation Container -->
        <div class="particles-container fixed inset-0 pointer-events-none z-0" id="particlesContainer"></div>
        
        <div class="layout-container flex flex-col grow h-full relative z-10">
            <!-- Modern Seamless Navbar -->
            <nav class="modern-navbar fixed top-0 left-0 right-0 z-30">
                <div class="navbar-container">
                    <!-- Logo/Brand -->
                    <div class="navbar-brand">
                        <a href="index.html" class="flex items-center">
                            <img src="../assets/fLogo.png" alt="NethwinLK" class="navbar-logo" />
                        </a>
                    </div>
                    
                    <!-- Navigation Links -->
                    <div class="navbar-links" id="navbarLinks">
                        <a href="index.html" class="nav-link">Home</a>
                        <a href="print.html" class="nav-link">Print Services</a>
                        <a href="bookshop.html" class="nav-link">Bookshop</a>
                        <a href="aboutus.html" class="nav-link">About</a>
                        <a href="contactus.html" class="nav-link">Contact</a>
                    </div>
                    
                    <!-- Desktop Auth Area -->
                    <div class="navbar-auth" id="navbarAuth">
                        <a href="cart.html" class="nav-auth-btn cart-container relative">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H17M9 19.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM20.5 19.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path>
                            </svg>
                            <span>Cart</span>
                            <span class="cart-count hidden" id="cartCount">0</span>
                        </a>
                        <a href="wishlist.html" class="nav-auth-btn wishlist-container relative active">
                            <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                            <span>Wishlist</span>
                            <span class="cart-count hidden" id="wishlistCount">0</span>
                        </a>
                        <a href="search.html" class="nav-auth-btn">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            Search
                        </a>
                        <a href="login.html" class="nav-auth-btn">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013 3v1"></path>
                            </svg>
                            Login
                        </a>
                    </div>
                    
                    <!-- Mobile Auth Icons -->
                    <div class="mobile-auth-icons hidden md:hidden">
                        <a href="cart.html" class="mobile-icon-btn mobile-cart-container relative">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.1 5H17M9 19.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM20.5 19.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path>
                            </svg>
                            <span class="mobile-cart-count hidden" id="mobileCartCount">0</span>
                        </a>
                        <a href="wishlist.html" class="mobile-icon-btn mobile-wishlist-container relative">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                            </svg>
                            <span class="mobile-cart-count hidden" id="mobileWishlistCount">0</span>
                        </a>
                        <a href="search.html" class="mobile-icon-btn">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </a>
                        <a href="login.html" class="mobile-icon-btn">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013 3v1"></path>
                            </svg>
                        </a>
                    </div>
                    
                    <!-- Mobile Menu Toggle -->
                    <button class="mobile-menu-toggle" id="mobileToggle">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
            </nav>
            
            <!-- Navbar Spacer -->
            <div style="height: 4rem"></div>
            
            <!-- Main Content -->
            <div class="px-4 md:px-10 flex flex-1 justify-center py-5 pt-20">
                <div class="layout-content-container flex flex-col max-w-[1200px] flex-1">
                    <!-- Breadcrumb -->
                    <nav class="mb-8">
                        <ol class="flex items-center space-x-2 text-sm text-[#51946c]">
                            <li><a href="index.html" class="hover:text-[#19e619]">Home</a></li>
                            <li><span class="mx-2">/</span></li>
                            <li class="text-[#0e1a13] font-medium">My Wishlist</li>
                        </ol>
                    </nav>
                    
                    <!-- Page Header -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-3xl font-bold text-[#0e1a13] mb-2">My Wishlist</h1>
                                <p class="text-[#51946c]">Items you've saved for later</p>
                            </div>
                            <div class="flex items-center gap-4">
                                <div class="flex items-center gap-2">
                                    <svg class="w-5 h-5 text-[#19e619]" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                    <span id="wishlistItemCount" class="text-lg font-semibold text-[#0e1a13] bg-gradient-to-r from-[#19e619]/10 to-[#16c914]/10 border border-[#19e619]/20 px-4 py-2 rounded-xl shadow-sm">0 items</span>
                                </div>
                                <button id="clearWishlistBtn" class="text-sm text-red-600 hover:text-red-700 font-medium bg-red-50 hover:bg-red-100 px-3 py-2 rounded-lg transition-colors duration-200 hidden">
                                    Clear All
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Wishlist Content -->
                    <div id="wishlistContent">
                        <!-- Loading State -->
                        <div id="wishlistLoading" class="text-center py-12">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#19e619]"></div>
                            <p class="mt-4 text-[#51946c]">Loading your wishlist...</p>
                        </div>
                        
                        <!-- Empty Wishlist -->
                        <div id="emptyWishlist" class="empty-wishlist text-center py-16 hidden">
                            <div class="mb-6">
                                <svg class="w-24 h-24 text-gray-300 mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                </svg>
                                <h2 class="text-2xl font-bold text-gray-900 mb-2">Your wishlist is empty</h2>
                                <p class="text-gray-600 mb-6 max-w-md mx-auto">Start adding items you love to your wishlist. You can save items for later and easily find them here.</p>
                            </div>
                            <div class="space-y-4">
                                <a href="bookshop.html" class="inline-block bg-[#19e619] hover:bg-[#16c914] text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                                    Browse Products
                                </a>
                                <div class="text-sm text-gray-500">
                                    <a href="index.html" class="text-[#19e619] hover:text-[#16c914]">← Back to Home</a>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Wishlist Items -->
                        <div id="wishlistItems" class="hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="wishlistGrid">
                                <!-- Wishlist items will be populated here -->
                            </div>
                            
                            <!-- Wishlist Actions -->
                            <div class="mt-8 pt-6 border-t border-gray-200">
                                <div class="flex flex-col sm:flex-row gap-4 justify-between items-center">
                                    <div class="flex items-center gap-2">
                                        <svg class="w-4 h-4 text-[#19e619]" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                        </svg>
                                        <span id="wishlistSummary" class="text-base font-medium text-[#0e1a13] bg-[#f8f9fa] px-3 py-1 rounded-lg border border-gray-200">0 items in your wishlist</span>
                                    </div>
                                    <div class="flex gap-3">
                                        <button id="addAllToCartBtn" class="bg-[#19e619] hover:bg-[#16c914] text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                                            Add All to Cart
                                        </button>
                                        <a href="bookshop.html" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                                            Continue Shopping
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="../javascript/background-animations.js"></script>
    <script src="../javascript/cart-utils.js"></script>
    <script src="../javascript/wishlist-utils.js"></script>
    <script>
        // Wishlist page specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            loadWishlistPage();
            setupWishlistEventListeners();
        });
        
        function loadWishlistPage() {
            const wishlist = window.wishlistManager.getWishlist();
            const wishlistLoading = document.getElementById('wishlistLoading');
            const emptyWishlist = document.getElementById('emptyWishlist');
            const wishlistItems = document.getElementById('wishlistItems');
            const wishlistItemCount = document.getElementById('wishlistItemCount');
            const clearWishlistBtn = document.getElementById('clearWishlistBtn');
            
            // Hide loading
            wishlistLoading.classList.add('hidden');
            
            // Update item count
            wishlistItemCount.textContent = `${wishlist.length} item${wishlist.length !== 1 ? 's' : ''}`;
            
            if (wishlist.length === 0) {
                // Show empty state
                emptyWishlist.classList.remove('hidden');
                wishlistItems.classList.add('hidden');
                clearWishlistBtn.classList.add('hidden');
            } else {
                // Show wishlist items
                emptyWishlist.classList.add('hidden');
                wishlistItems.classList.remove('hidden');
                clearWishlistBtn.classList.remove('hidden');
                
                displayWishlistItems(wishlist);
                updateWishlistSummary(wishlist);
            }
        }
        
        function displayWishlistItems(wishlist) {
            const wishlistGrid = document.getElementById('wishlistGrid');
            
            wishlistGrid.innerHTML = wishlist.map(item => {
                const addedDate = new Date(item.addedAt).toLocaleDateString();
                
                return `
                    <div class="wishlist-item bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                        <div class="relative">
                            <img src="${item.image || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNTAgMTAwQzE2NS40NjQgMTAwIDE3NyAxMTEuNTM2IDE3NyAxMjdDMTc3IDE0Mi40NjQgMTY1LjQ2NCAxNTQgMTUwIDE1NEMxMzQuNTM2IDE1NCAxMjMgMTQyLjQ2NCAxMjMgMTI3QzEyMyAxMTEuNTM2IDEzNC41MzYgMTAwIDE1MCAxMDBaIiBmaWxsPSIjOUI5QkE1Ii8+CjxwYXRoIGQ9Ik0xMjMgMTc3SDE3N1YyMDBIMTIzVjE3N1oiIGZpbGw9IiM5QjlCQTUiLz4KPC9zdmc+'}" 
                                 alt="${item.name}" 
                                 class="w-full h-48 object-cover">
                            
                            <!-- Remove from Wishlist Button -->
                            <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-110"
                                    onclick="removeFromWishlist('${item.id}')">
                                <svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="p-4">
                            <div class="mb-2">
                                <h3 class="font-semibold text-gray-900 line-clamp-2 mb-1">${item.name}</h3>
                                <p class="text-sm text-gray-500">${item.category || 'Product'} ${item.brand ? `• ${item.brand}` : ''}</p>
                            </div>
                            
                            <div class="mb-3">
                                <span class="text-lg font-bold text-[#19e619]">LKR ${item.price.toFixed(2)}</span>
                            </div>
                            
                            <div class="mb-3">
                                <span class="text-xs text-gray-400">Added on ${addedDate}</span>
                            </div>
                            
                            <div class="space-y-2">
                                <button onclick="moveToCart('${item.id}')" 
                                        class="w-full bg-[#19e619] hover:bg-[#16c914] text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                                    Add to Cart
                                </button>
                                <a href="product-detail.html?id=${item.id}" 
                                   class="block w-full text-center bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                                    View Details
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function updateWishlistSummary(wishlist) {
            const wishlistSummary = document.getElementById('wishlistSummary');
            wishlistSummary.textContent = `${wishlist.length} item${wishlist.length !== 1 ? 's' : ''} in your wishlist`;
        }
        
        function setupWishlistEventListeners() {
            // Clear all wishlist
            document.getElementById('clearWishlistBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to clear your entire wishlist?')) {
                    window.wishlistManager.clearWishlist();
                    loadWishlistPage();
                }
            });
            
            // Add all to cart
            document.getElementById('addAllToCartBtn').addEventListener('click', function() {
                const wishlist = window.wishlistManager.getWishlist();
                let addedCount = 0;
                
                wishlist.forEach(item => {
                    if (window.cartManager) {
                        window.cartManager.addToCart({
                            id: item.id,
                            name: item.name,
                            price: item.price,
                            image: item.image,
                            qty: 1
                        });
                        addedCount++;
                    }
                });
                
                if (addedCount > 0) {
                    // Clear wishlist after adding all to cart
                    window.wishlistManager.clearWishlist();
                    loadWishlistPage();
                    
                    // Show success message
                    alert(`${addedCount} item${addedCount !== 1 ? 's' : ''} added to cart!`);
                }
            });
        }
        
        function removeFromWishlist(productId) {
            window.wishlistManager.removeFromWishlist(productId);
            loadWishlistPage();
            
            // Show notification
            showWishlistNotification('Item removed from wishlist', false);
        }
        
        function moveToCart(productId) {
            const success = window.wishlistManager.moveToCart(productId);
            if (success) {
                loadWishlistPage();
                showWishlistNotification('Item moved to cart!', true);
            }
        }
        
        // Line clamp utility
        const style = document.createElement('style');
        style.textContent = `
            .line-clamp-2 {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
